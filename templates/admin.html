<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Admin | Stats</title>
  <style>
    :root{
      --bg:#F5F6FA; --bg2:#E5E7EB; --card:#FFFFFF; --line:#E5E7EB;
      --text:#2E2E2E; --muted:#6B7280; --primary:#C8A2C8;
      --btn:#6A1B9A; --btnHover:#4A148C;
      --shadow:0 18px 45px rgba(17,24,39,0.10); --radius:18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0; min-height:100vh; display:grid; place-items:center;
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;
      background:linear-gradient(135deg,var(--bg),var(--bg2));
      color:var(--text); padding:20px;
    }
    .wrap{width:min(980px,100%);}
    .card{background:var(--card); border:1px solid var(--line); border-radius:var(--radius);
      box-shadow:var(--shadow); overflow:hidden;}
    .header{
      padding:18px 20px;
      background:linear-gradient(135deg, rgba(200,162,200,0.16), rgba(229,231,235,0.70));
      border-bottom:1px solid var(--line);
      display:flex; align-items:center; justify-content:space-between; gap:12px;
    }
    h1{margin:0;font-size:18px}
    .muted{color:var(--muted);font-size:13px}
    table{width:100%; border-collapse:collapse;}
    th, td{padding:12px 14px; border-bottom:1px solid var(--line); text-align:left; font-size:14px; vertical-align:top;}
    th{color:var(--muted);font-weight:800;}
    a{color:var(--btn);text-decoration:none;font-weight:700}
    .pill{display:inline-block; padding:6px 10px; border-radius:999px;
      background:rgba(200,162,200,0.14); border:1px solid var(--line);
      font-size:12px; color:var(--text); font-weight:700;}
    .actions{padding:16px; display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end;}
    .btn{padding:12px 14px; border-radius:12px; border:1px solid rgba(74,20,140,0.18);
      background:var(--btn); color:#fff; font-weight:800; cursor:pointer; text-decoration:none;}
    .btn:hover{background:var(--btnHover)}
    .btn.secondary{background:transparent; color:var(--btn); border:1px solid rgba(106,27,154,0.35);}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div class="header">
        <div>
          <h1>Digital Card Stats</h1>
          <div class="muted">Each card has its own link and its own counters.</div>
        </div>
        <div class="muted">/admin</div>
      </div>

      <table>
        <tr>
          <th>Card</th>
          <th>Link</th>
          <th>Saved</th>
          <th>WhatsApp</th>
          <th>Email</th>
          <th>Map</th>
          <th>Share</th>
        </tr>
        {% for r in rows %}
        <tr>
          <td>
            <div style="font-weight:800;">{{ r.display_name }}</div>
            <div class="muted">{{ r.contact_save_name }}</div>
            <div style="margin-top:6px;"><span class="pill">{{ r.slug }}</span></div>
          </td>
          <td><a href="{{ r.card_url }}" target="_blank" rel="noopener">{{ r.card_url }}</a></td>
          <td>{{ r.contact_shared }}</td>
          <td>{{ r.whatsapp_clicks }}</td>
          <td>{{ r.email_clicks }}</td>
          <td>{{ r.map_clicks }}</td>
          <td>{{ r.share_clicks }}</td>
        </tr>
        {% endfor %}
      </table>

      <div class="actions">
        <form method="post" action="{{ url_for('admin_reset') }}">
          <button class="btn secondary" type="submit">Reset ALL counters</button>
        </form>
        <form method="post" action="{{ url_for('admin_logout') }}">
          <button class="btn" type="submit">Log out</button>
        </form>
      </div>
    </div>
  </div>
</body>
</html>